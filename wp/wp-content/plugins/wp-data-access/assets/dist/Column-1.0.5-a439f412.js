import{l as O,bY as K,r as e,j as r,db as Q,_ as h}from"./main-1.0.5.js";import{l as U}from"./ActionsDml-1.0.5-5478d97e.js";import{b as X}from"./main-1.0.5-a7d73e33.js";import{i as Z}from"./index-1.0.5-565e836d.js";import{F as $,A as u,T as l,a as N}from"./TextField-1.0.5-7ecf712b.js";import"./iconBase-1.0.5-f30be7a9.js";import"./Close-1.0.5-697e5a3b.js";const I=({appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,storeForm:y,formMode:x})=>{var H,F;O.debug(v,d,E,A,p,i,L,s,y,x);const j=X(_=>K(_,v));O.debug("data",j);const[k,W]=e.useState([]);O.debug("lov",k);const[R,w]=e.useState(Array.isArray((H=i.lookup)==null?void 0:H.dynamicConditions)?(F=i.lookup)==null?void 0:F.dynamicConditions.map(_=>({columnName:_.tableColumnName,columnValue:""})):[]);O.debug("conditions",R),e.useEffect(()=>{var _,P;Array.isArray((_=i.lookup)==null?void 0:_.dynamicConditions)&&((P=i.lookup)==null||P.dynamicConditions.map(b=>{j[b.tableColumnName]===void 0&&O.error("Invalid lookup: column "+b.tableColumnName+" in dynamic condition not found.")})),R.length===0&&T()},[]),e.useEffect(()=>{var _,P;if(Object.keys(R).length>0){const b=Array.isArray((_=i.lookup)==null?void 0:_.dynamicConditions)?(P=i.lookup)==null?void 0:P.dynamicConditions.map(S=>({columnName:S.lookupColumnName,columnValue:j[S.tableColumnName]??""})):[];if(O.debug(b),!Z(R,b)){const S={};b.length>0&&b.map(g=>{S[g.columnName]=g.columnValue}),O.debug("reloading dynamic lookup",d,b),T(S),w(b)}}},[j]);const T=(_={})=>{var P,b;U(v,"form",d,((P=i.lookup)==null?void 0:P.key)??"",((b=i.lookup)==null?void 0:b.value)??"",_,S=>{var g,t,c;if(O.debug(S.data),!((g=i.lookup)!=null&&g.value.includes(",")))W(S.data);else{const Y=(t=i.lookup)==null?void 0:t.value.split(","),q=[];for(let z=0;z<S.data.length;z++){const G=Y.map(J=>S.data[z][J]).join(((c=i.lookup)==null?void 0:c.delimiter)??"");q.push({key:S.data[z].key,value:G})}W(q)}},S=>{O.error(S)})},B=e.useMemo(()=>k.filter(_=>_.key===E)[0]??null,[E,k]);return r.jsxs($,{fullWidth:!0,children:[r.jsx(u,{multiple:!1,fullWidth:!0,autoHighlight:!0,options:k,getOptionLabel:_=>Array.isArray(_.value)?_.value[0]:_.value,value:B,onChange:(_,P)=>{P!==null?f(d,P==null?void 0:P.key):f(d,null)},renderInput:_=>r.jsx(l,{label:p.formLabel,required:p.is_nullable==="NO",..._,inputProps:{..._.inputProps,autoComplete:"new-password"}})}),r.jsx(N,{children:Q(i,"Select a value from the list or start typing")})]})},M=e.lazy(()=>h(()=>import("./FieldText-1.0.5-70bf30c5.js"),["./FieldText-1.0.5-70bf30c5.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./InputAdornment-1.0.5-b81a1094.js"],import.meta.url)),n=e.lazy(()=>h(()=>import("./FieldTextarea-1.0.5-99c35ce8.js"),["./FieldTextarea-1.0.5-99c35ce8.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js"],import.meta.url)),C=e.lazy(()=>h(()=>import("./FieldNumber-1.0.5-4aab0aad.js"),["./FieldNumber-1.0.5-4aab0aad.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./InputAdornment-1.0.5-b81a1094.js"],import.meta.url)),V=e.lazy(()=>h(()=>import("./FieldSet-1.0.5-aeceec1d.js"),["./FieldSet-1.0.5-aeceec1d.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./MenuItem-1.0.5-151020c5.js"],import.meta.url)),D=e.lazy(()=>h(()=>import("./FieldEnum-1.0.5-888c5fcd.js"),["./FieldEnum-1.0.5-888c5fcd.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./MenuItem-1.0.5-151020c5.js","./EnumTypeEnum-1.0.5-7ffcf33a.js","./RadioGroup-1.0.5-2e2c1c10.js","./Radio-1.0.5-9d423ffa.js","./FormControlLabel-1.0.5-d0651878.js"],import.meta.url)),o=e.lazy(()=>h(()=>import("./FieldDate-1.0.5-6ad46a6e.js"),["./FieldDate-1.0.5-6ad46a6e.js","./main-1.0.5.js","./dayjs.min-1.0.5-ef136ab2.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./vi-1.0.5-b29d2783.js","./useMobilePicker-1.0.5-94af1d31.js","./DialogContent-1.0.5-383cf0b4.js","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./InputAdornment-1.0.5-b81a1094.js","./AdminTheme-1.0.5-04bcac94.js","./AdapterDayjs-1.0.5-1284e98e.js","./DatePicker-1.0.5-3533cde7.js","./dateViewRenderers-1.0.5-ca3d57b4.js"],import.meta.url)),m=e.lazy(()=>h(()=>import("./FieldDatetime-1.0.5-27ab7dbf.js"),["./FieldDatetime-1.0.5-27ab7dbf.js","./main-1.0.5.js","./dayjs.min-1.0.5-ef136ab2.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./vi-1.0.5-b29d2783.js","./useMobilePicker-1.0.5-94af1d31.js","./DialogContent-1.0.5-383cf0b4.js","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./InputAdornment-1.0.5-b81a1094.js","./AdminTheme-1.0.5-04bcac94.js","./AdapterDayjs-1.0.5-1284e98e.js","./DateTimePicker-1.0.5-f2511f2b.js","./Tabs-1.0.5-8b2f6dd8.js","./date-time-utils-1.0.5-d782c334.js","./MenuItem-1.0.5-151020c5.js","./dateViewRenderers-1.0.5-ca3d57b4.js"],import.meta.url)),a=e.lazy(()=>h(()=>import("./FieldTime-1.0.5-0e48e4dc.js"),["./FieldTime-1.0.5-0e48e4dc.js","./main-1.0.5.js","./dayjs.min-1.0.5-ef136ab2.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./vi-1.0.5-b29d2783.js","./useMobilePicker-1.0.5-94af1d31.js","./DialogContent-1.0.5-383cf0b4.js","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./InputAdornment-1.0.5-b81a1094.js","./AdminTheme-1.0.5-04bcac94.js","./AdapterDayjs-1.0.5-1284e98e.js","./TimePicker-1.0.5-a761c18a.js","./date-time-utils-1.0.5-d782c334.js","./MenuItem-1.0.5-151020c5.js"],import.meta.url)),ii=e.lazy(()=>h(()=>import("./FieldCheckbox-1.0.5-f88457db.js"),["./FieldCheckbox-1.0.5-f88457db.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./FormControlLabel-1.0.5-d0651878.js","./Checkbox-1.0.5-abd3391a.js"],import.meta.url)),si=e.lazy(()=>h(()=>import("./ColumnWpMedia-1.0.5-ad16fe94.js"),["./ColumnWpMedia-1.0.5-ad16fe94.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./index.esm-1.0.5-cbf5a94b.js","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./AdminTheme-1.0.5-04bcac94.js"],import.meta.url)),ri=e.lazy(()=>h(()=>import("./ColumnHyperlink-1.0.5-c008e0bf.js"),["./ColumnHyperlink-1.0.5-c008e0bf.js","./main-1.0.5.js","./main-1.0.5-a7d73e33.js","./iconBase-1.0.5-f30be7a9.js","./main-1.0.5-ca6efa15.css","./TextField-1.0.5-7ecf712b.js","./Close-1.0.5-697e5a3b.js","./FormControlLabel-1.0.5-d0651878.js","./Checkbox-1.0.5-abd3391a.js"],import.meta.url)),Ei=({appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})=>{if(O.debug(v,d,E,A,p,i,s,y,x,j),s!=null&&s.media[d]){if(["WP-Image","WP-Attachment","WP-Audio","WP-Video"].includes(s==null?void 0:s.media[d]))return r.jsx(e.Suspense,{children:r.jsx(si,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k,columnMedia:y==null?void 0:y.media[d],mediaType:s==null?void 0:s.media[d]})});if((s==null?void 0:s.media[d])==="HyperlinkObject")return r.jsx(e.Suspense,{children:r.jsx(ri,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})})}else{if(p.column_type.toLowerCase()==="tinyint(1)")return r.jsx(e.Suspense,{children:r.jsx(ii,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});if(i.lookup!==void 0)return r.jsx(I,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})}switch(p.data_type.toLowerCase()){case"decimal":case"double":case"double precision":case"float":case"real":case"bit":case"tinyint":case"smallint":case"int":case"integer":case"mediumint":case"bigint":return r.jsx(e.Suspense,{children:r.jsx(C,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"enum":return r.jsx(e.Suspense,{children:r.jsx(D,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"set":return r.jsx(e.Suspense,{children:r.jsx(V,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"time":return r.jsx(e.Suspense,{children:r.jsx(a,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"date":return r.jsx(e.Suspense,{children:r.jsx(o,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"datetime":case"timestamp":return r.jsx(e.Suspense,{children:r.jsx(m,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});case"tinytext":case"text":case"mediumtext":case"longtext":return r.jsx(e.Suspense,{children:r.jsx(n,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})});default:return r.jsx(e.Suspense,{children:r.jsx(M,{appId:v,columnName:d,columnValue:E,columnInitialValue:A,columnMetaData:p,storeColumn:i,columnValidation:L,onColumnChange:f,metaData:s,context:y,storeTable:x,storeForm:j,formMode:k})})}};export{Ei as default};
